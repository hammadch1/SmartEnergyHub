{"ast":null,"code":"var _jsxFileName = \"/Users/muhammadhammadchaudhary/Desktop/SmartEnergyHub/smart-energy-dashboard/src/App.js\";\nimport React from \"react\";\n// import react hooks (useEffect, useState) -> needed for data and auto-refreshing\nimport { useEffect, useState } from \"react\";\n// axios -> used to make HTTP requests to our backend\nimport axios from \"axios\";\n// for data visualization\nimport { Line } from \"react-chartjs-2\";\nimport \"chart.js/auto\";\n\n// stores the API endpoint so we can fetch sensor data\nconst API_URL = \"http://localhost:5001/api/readings\"; // BACKEND API URL\n\nfunction App() {\n  // creates energyData state -> holds sensor data, initially it's an empty array ([])\n  const [energyData, setEnergyData] = useState([]);\n\n  // makes the GET request to API Route in our backend & updates the energy state with the response\n  const fetchData = async () => {\n    try {\n      const response = await axios.get(API_URL);\n      console.log(\"Fetched Data:\", response.data); // Debug log\n\n      if (Array.isArray(response.data)) {\n        setEnergyData(response.data);\n      } else {\n        console.error(\"Invalid API response format:\", response.data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching the response:\", error);\n    }\n  };\n  // calls fetch data once when the component loads & sets a data refresh interval of every 5 seconds\n  useEffect(() => {\n    fetchData();\n    const interval = setInterval(fetchData, 5000); // refresh every 5s\n    return () => clearInterval(interval);\n  });\n\n  // prepare data for visualization, sets timetstamp on x-axis and energy values on y-axis and defines line chart style\n  const sortedData = [...energyData].sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));\n  const uniqueTimestamps = [...new Set(sortedData.map(entry => entry.timestamp))];\n  const getSensorData = sensorName => uniqueTimestamps.map(timestamp => {\n    const entry = sortedData.find(e => e.sensor === sensorName && e.timestamp === timestamp);\n    return entry ? entry.value : null; // Ensure null values instead of skipping\n  });\n  const chartData = energyData.length > 0 ? {\n    labels: uniqueTimestamps.map(timestamp => new Date(timestamp).toLocaleTimeString([], {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\"\n    })),\n    datasets: [{\n      label: \"HVAC Floor 1\",\n      data: getSensorData(\"hvac/floor1\"),\n      spanGaps: true,\n      borderColor: \"rgb(255, 99, 132)\",\n      backgroundColor: \"rgba(255, 99, 132, 0.2)\",\n      borderWidth: 3,\n      // Ensure thick lines\n      pointRadius: 5 // Ensure points are visible\n    }, {\n      label: \"HVAC Floor 2\",\n      data: getSensorData(\"hvac/floor2\"),\n      spanGaps: true,\n      borderColor: \"rgb(54, 162, 235)\",\n      backgroundColor: \"rgba(54, 162, 235, 0.2)\",\n      borderWidth: 3,\n      pointRadius: 5\n    }, {\n      label: \"Lighting Floor 1\",\n      data: getSensorData(\"lighting/floor1\"),\n      spanGaps: true,\n      borderColor: \"rgb(255, 206, 86)\",\n      backgroundColor: \"rgba(255, 206, 86, 0.2)\",\n      borderWidth: 3,\n      pointRadius: 5\n    }, {\n      label: \"Lighting Floor 2\",\n      data: getSensorData(\"lighting/floor2\"),\n      spanGaps: true,\n      borderColor: \"rgb(75, 192, 192)\",\n      backgroundColor: \"rgba(75, 192, 192, 0.2)\",\n      borderWidth: 3,\n      pointRadius: 5\n    }]\n  } : {\n    labels: [],\n    datasets: []\n  }; // Fix: Prevent empty dataset errors\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      padding: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    img: \"\\uD83D\\uDCCA\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }), \" Smart Energy Dashboard\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"100%\",\n      height: \"500px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Line, {\n    data: chartData,\n    options: {\n      responsive: true,\n      maintainAspectRatio: true,\n      // Keeps chart properly visible on screen\n      elements: {\n        line: {\n          tension: 0.2,\n          // Smoothens the lines slightly\n          borderWidth: 3 // Thicker lines for better visibility\n        },\n        point: {\n          radius: 5 // Larger points for clarity\n        }\n      },\n      scales: {\n        x: {\n          ticks: {\n            autoSkip: true,\n            // âœ… Forces even spacing\n            maxTicksLimit: 10 // âœ… Shows at most 10 timestamps to fit well\n          }\n        },\n        y: {\n          beginAtZero: false // Keeps the values relative to min/max of dataset\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })));\n}\nexport default App;","map":{"version":3,"names":["React","useEffect","useState","axios","Line","API_URL","App","energyData","setEnergyData","fetchData","response","get","console","log","data","Array","isArray","error","interval","setInterval","clearInterval","sortedData","sort","a","b","Date","timestamp","uniqueTimestamps","Set","map","entry","getSensorData","sensorName","find","e","sensor","value","chartData","length","labels","toLocaleTimeString","hour","minute","second","datasets","label","spanGaps","borderColor","backgroundColor","borderWidth","pointRadius","createElement","style","textAlign","padding","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","img","width","height","options","responsive","maintainAspectRatio","elements","line","tension","point","radius","scales","x","ticks","autoSkip","maxTicksLimit","y","beginAtZero"],"sources":["/Users/muhammadhammadchaudhary/Desktop/SmartEnergyHub/smart-energy-dashboard/src/App.js"],"sourcesContent":["import React from \"react\"\n// import react hooks (useEffect, useState) -> needed for data and auto-refreshing\nimport { useEffect, useState } from \"react\"\n// axios -> used to make HTTP requests to our backend\nimport axios from \"axios\"\n// for data visualization\nimport { Line } from \"react-chartjs-2\"\nimport \"chart.js/auto\"\n\n// stores the API endpoint so we can fetch sensor data\nconst API_URL = \"http://localhost:5001/api/readings\" // BACKEND API URL\n\nfunction App() {\n  // creates energyData state -> holds sensor data, initially it's an empty array ([])\n  const [energyData, setEnergyData] = useState([])\n\n  // makes the GET request to API Route in our backend & updates the energy state with the response\n  const fetchData = async () => {\n    try {\n      const response = await axios.get(API_URL)\n\n      console.log(\"Fetched Data:\", response.data) // Debug log\n\n      if (Array.isArray(response.data)) {\n        setEnergyData(response.data)\n      } else {\n        console.error(\"Invalid API response format:\", response.data)\n      }\n    } catch (error) {\n      console.error(\"Error fetching the response:\", error)\n    }\n  }\n  // calls fetch data once when the component loads & sets a data refresh interval of every 5 seconds\n  useEffect(() => {\n    fetchData()\n    const interval = setInterval(fetchData, 5000) // refresh every 5s\n    return () => clearInterval(interval)\n  })\n\n  // prepare data for visualization, sets timetstamp on x-axis and energy values on y-axis and defines line chart style\n  const sortedData = [...energyData].sort(\n    (a, b) => new Date(a.timestamp) - new Date(b.timestamp)\n  )\n\n  const uniqueTimestamps = [\n    ...new Set(sortedData.map((entry) => entry.timestamp)),\n  ]\n\n  const getSensorData = (sensorName) =>\n    uniqueTimestamps.map((timestamp) => {\n      const entry = sortedData.find(\n        (e) => e.sensor === sensorName && e.timestamp === timestamp\n      )\n      return entry ? entry.value : null // Ensure null values instead of skipping\n    })\n\n  const chartData =\n    energyData.length > 0\n      ? {\n          labels: uniqueTimestamps.map((timestamp) =>\n            new Date(timestamp).toLocaleTimeString([], {\n              hour: \"2-digit\",\n              minute: \"2-digit\",\n              second: \"2-digit\",\n            })\n          ),\n          datasets: [\n            {\n              label: \"HVAC Floor 1\",\n              data: getSensorData(\"hvac/floor1\"),\n              spanGaps: true,\n              borderColor: \"rgb(255, 99, 132)\",\n              backgroundColor: \"rgba(255, 99, 132, 0.2)\",\n              borderWidth: 3, // Ensure thick lines\n              pointRadius: 5, // Ensure points are visible\n            },\n            {\n              label: \"HVAC Floor 2\",\n              data: getSensorData(\"hvac/floor2\"),\n              spanGaps: true,\n              borderColor: \"rgb(54, 162, 235)\",\n              backgroundColor: \"rgba(54, 162, 235, 0.2)\",\n              borderWidth: 3,\n              pointRadius: 5,\n            },\n            {\n              label: \"Lighting Floor 1\",\n              data: getSensorData(\"lighting/floor1\"),\n              spanGaps: true,\n              borderColor: \"rgb(255, 206, 86)\",\n              backgroundColor: \"rgba(255, 206, 86, 0.2)\",\n              borderWidth: 3,\n              pointRadius: 5,\n            },\n            {\n              label: \"Lighting Floor 2\",\n              data: getSensorData(\"lighting/floor2\"),\n              spanGaps: true,\n              borderColor: \"rgb(75, 192, 192)\",\n              backgroundColor: \"rgba(75, 192, 192, 0.2)\",\n              borderWidth: 3,\n              pointRadius: 5,\n            },\n          ],\n        }\n      : { labels: [], datasets: [] } // Fix: Prevent empty dataset errors\n\n  return (\n    <div style={{ textAlign: \"center\", padding: \"20px\" }}>\n      <h1>\n        <span img=\"ðŸ“Š\" /> Smart Energy Dashboard\n      </h1>\n      <div style={{ width: \"100%\", height: \"500px\" }}>\n        <Line\n          data={chartData}\n          options={{\n            responsive: true,\n            maintainAspectRatio: true, // Keeps chart properly visible on screen\n            elements: {\n              line: {\n                tension: 0.2, // Smoothens the lines slightly\n                borderWidth: 3, // Thicker lines for better visibility\n              },\n              point: {\n                radius: 5, // Larger points for clarity\n              },\n            },\n            scales: {\n              x: {\n                ticks: {\n                  autoSkip: true, // âœ… Forces even spacing\n                  maxTicksLimit: 10, // âœ… Shows at most 10 timestamps to fit well\n                },\n              },\n              y: {\n                beginAtZero: false, // Keeps the values relative to min/max of dataset\n              },\n            },\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}